<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Super Mario 2D</title>
    <style>
        body{
            margin: 0;
            background-color: cornflowerblue;

        }
        #terreno{
            background-image: url('mattoncinoSuperMario2D.png');
            width: 620px; height: 120px;
            margin-top: 33em;
            
        }
        #terreno2{
            background-image: url('mattoncinoSuperMario2D.png');
            height: 120px; width: 876px;
        }
        img{
            position: absolute;
            width: 1200px; height: 120px;
            margin-top: -33em;
        }
        #superMario{
            background-image: url('superMario2D.png');
            height: 66px;
            width: 50px;
            position: absolute;
            top: 465px;

        }
        p{
            margin: 1em;
            margin-top: -30em;
            color: white;
            font-size: 20px;
        }
    </style>
    <script>
        "use strict";
        let superMarioX = 0;
        let superMarioY;
        let superMario;
        let timer;
        function avviaTimer(){
            superMario = document.getElementById("superMario");
            superMarioY = parseInt(window.getComputedStyle(superMario).top); 
            console.log(superMarioY);

            // fa partire la canzone
            let player = document.getElementById("themeSong");
            console.log(player);
            player.play();
        }
        let altezzaSalto=80; // Altezza del salto
        function pigiato(evento){
            if(evento.key == 'w' || evento.key == ' '){
                console.log("salta");
                let durataSalto = 300; // Durata prima di tornare gi√π (in millisecondi)
                 // Salto verso l'alto
                superMarioY -= altezzaSalto;
                superMario.style.top = superMarioY + "px";
                 setTimeout(abbassa,durataSalto);
            }
	        if(evento.key == 's'){
                superMarioY+=10;
                superMario.style.top=superMarioY+"px";
            }
	        if(evento.key == 'a'){
                superMarioX-=10; superMario.style.left = superMarioX +"px";
            }
	        if(evento.key == 'd'){ 
                superMarioX+=10; superMario.style.left = superMarioX +"px";
            }
        }
        function abbassa(){
            superMarioY+=altezzaSalto;
            superMario.style.top = superMarioY + "px";
        }

    </script>
</head>
    <body onkeydown="pigiato(event)" onload="avviaTimer()" >
        <div id="superMario"></div>
        <div id="terreno"></div>
        <div id="terreno2"></div>
        <img src="cieloSuperMario2D.png" alt="cielo" >
        <audio src="Super Mario Bros. Theme Song.mp3" id="themeSong" onload="inizia()"></audio>
        <p>TIME</p>
    </body>
</html>
